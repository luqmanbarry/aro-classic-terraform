
# Complete var list: https://github.com/signalfx/splunk-otel-collector-chart/blob/main/helm-charts/splunk-otel-collector/values.yaml
resourceNamePrefix: aro-gitops
keyVaultName: "changeme"
hecKeyVaultSecretName: "splunk-platform-hec-details"

helmChart:
  name: splunk-otel-collector
  repoURL: https://signalfx.github.io/splunk-otel-collector-chart
  targetRevision: 0.110.0

# splunk-otel-collector: # subchart name to override its values.
clusterName: "changeme" # REQUIRED
namespaceOverride: "splunk-otel-collector"
cloudProvider: "azure" # {aws|azure|gke}
distribution: "openshift" # {eks, aks, eks/fargate,..}
environment: dev
logsEnabled: true
metricsEnabled: false
tracesEnabled: false

# securityContext: {}

splunkPlatform:
  endpoint: "changeme" # REQUIRED
  index: "changeme" # REQUIRED
  source: "kubernetes"
  maxConnections: 200
  disableCompression: false
  timeout: 30s
  idleConnTimeout: 10s

  # token: "changeme" # REQUIRED - https://github.com/signalfx/splunk-otel-collector-chart/blob/main/helm-charts/splunk-otel-collector/templates/secret-splunk.yaml
  # token:
  retryOnFailure:
    enabled: true
    initialInterval: 5s
    maxInterval: 30s
    maxElapsedTime: 300s

logsEngine: otel
secret:
  create: false
  name: "splunk-platform-hec-details"

logsCollection:

  # Container logs collection
  containers:
    enabled: true
    containerRuntime: ""
    # Boolean for ingesting the agent's own log
    excludeAgentLogs: false

  # Configuration for collecting journald logs using otel collector
  journald:
    enabled: true
    directory: /run/log/journal
    units:
      - name: kubelet
        priority: info
      - name: docker
        priority: info
      - name: containerd
        priority: info
      - name: cri-o
        priority: info
    # Route journald logs to its own Splunk Index by specifying the index value below, else leave it blank. Please make sure the index exist in Splunk and is configured to receive HEC traffic. Not applicable to Splunk Observability.
    index: ""

agent:
  enabled: true
  service:
    enabled: true
  extraEnvs:
    - name: HTTP_PROXY
      value: http://localhost:9098
    - name: HTTPS_PROXY
      value: http://localhost:9098
    - name: NO_PROXY
      value: http://localhost:9098


rbac:
  create: true

tolerations:
  - key: node-role.kubernetes.io/master
    effect: NoSchedule
  - key: node-role.kubernetes.io/control-plane
    effect: NoSchedule

securityContextConstraints:
  create: true