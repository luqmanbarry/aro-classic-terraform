---
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: "{{ .Values.keyVaultName | lower }}"
  annotations:
    managed-by: argocd.argoproj.io
    argocd.argoproj.io/sync-wave: "3"
    argocd.argoproj.io/sync-options: "SkipDryRunOnMissingResource=true"
spec:
  provider:
    azurekv:
      authType: WorkloadIdentity
      vaultUrl: "{{ .Values.provider.azurekv.vaultURL }}"
      serviceAccountRef:
        name: "{{ .Values.authNServiceAccountName }}"